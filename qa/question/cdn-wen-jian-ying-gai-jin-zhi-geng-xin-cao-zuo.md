---
description: 禁止 CDN 更新文件的操作
---

# CDN 文件应该禁止更新操作

#### 问题描述：

> 更新 CDN 后，部分人拉到的文件是新的，部分人拉到的文件仍然是旧的。此问题在 AWS 和华为云 OBS 都出现过。

#### 原因：

_CDN_ (内容分发网络) 指的是一组分布在各个地区的服务器。这些服务器存储着数据的副本，因此服务器可以根据哪些服务器与用户距离最近，来满足数据的请求。

也就是说，cdn 缓存会导致文件更新后，不能及时进行同步。（通过文件名，文件路径来进行更新）

#### 解决方式：

1. 使用心得文件名命名，比如每次上传文件都会对该文件文件名进行 md5 等，保证文件名不会重复。
2. 使用文件路径区分，如  日期/文件夹MD5值/文件，这样每次上传都会到一个新的目录。
